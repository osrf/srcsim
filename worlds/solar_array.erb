<%
  # Template for solar array for SRC finals world

  # Requires the following global variables:
  # $array_frame

  size_x = 1.5
  size_y = 1
  size_z = 0.7
%>

<model name="solar_array">

  <static>true</static>

  <pose>
    <%= $array_frame[0, 2] %>
    <%= $array_frame[1, 2] %>
    <%= size_z / 2 %>
    0
    0
    <%= Math::atan2($array_frame[1, 0], $array_frame[0, 0]) %>
  </pose>

  <link name="link">
    <visual name="visual">
      <geometry>
        <box>
          <size><%= size_x %> <%= size_y %> <%= size_z %></size>
        </box>
      </geometry>
    </visual>
    <collision name="collision">
      <geometry>
        <box>
          <size><%= size_x %> <%= size_y %> <%= size_z %></size>
        </box>
      </geometry>
    </collision>
  </link>

</model>
