<?xml version="1.0" ?>
<sdf version="1.6">
  <model name="src_habitat">

    <model name="src_habitat_frame">
      <static>true</static>
      <link name="link_stairs">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Stairs</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Stairs</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="link_module_long">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Long</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Long</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="link_door_04">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_04</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_04</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="link_module_large">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Large</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Large</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="link_door_01">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_01</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_01</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="door_03">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_03</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_03</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <link name="module_small">
        <collision name="collision">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Small</name>
              </submesh>
            </mesh>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>0 0 0 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Module_Small</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>
    </model>

    <!-- The door -->
    <model name="door">
      <pose>-6.68 -1.37 2.88 0 0 0</pose>
      <static>false</static>

      <!-- door body -->
      <link name="base">

        <inertial>
          <pose>-4.3 -1 2.4 0 0 0</pose>
          <mass>18</mass>
          <inertia>
            <ixx>6.304</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>6.9932</iyy>
            <iyz>0</iyz>
            <izz>0.7979</izz>
          </inertia>
        </inertial>

        <collision name="collision">
          <geometry>
            <box>
              <size>1.14 0.17 1.67</size>
            </box>
          </geometry>
        </collision>
        <visual name="visual">
          <pose>6.68 1.37 -2.88 0 0 0</pose>
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/hdu.obj</uri>
              <scale>0.0254 0.0254 0.0254</scale>
              <submesh>
                <name>Door_02</name>
              </submesh>
            </mesh>
          </geometry>
        </visual>
      </link>

      <!-- door valve -->
      <link name="valve">
        <pose>0 -0.0 0.08 0 0 3.14</pose>
        <inertial>
          <mass>7.8219</mass>
          <pose>0 0.0615 0 0 0 0</pose>
          <inertia>
            <ixx>0.0695</ixx>
            <ixy>0.0000</ixy>
            <ixz>0.0000</ixz>
            <iyy>0.1349</iyy>
            <iyz>0.0000</iyz>
            <izz>0.0695</izz>
          </inertia>
        </inertial>
        <collision name="collision">
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/wheel_valve_large.dae</uri>
            </mesh>
          </geometry>
          <surface>
            <friction>
              <ode>
                <mu>1</mu>
                <mu2>1</mu2>
              </ode>
            </friction>
            <contact>
              <ode>
                <kp>1000000.0</kp>
                <kd>100.0</kd>
                <max_vel>0.01</max_vel>
                <min_depth>0.001</min_depth>
              </ode>
            </contact>
          </surface>
        </collision>
        <visual name="visual">
          <geometry>
            <mesh>
              <uri>model://src_habitat/meshes/wheel_valve_large.dae</uri>
            </mesh>
          </geometry>
        </visual>
      </link>

      <!-- Joint connecting the valve and the door -->
      <joint name="valve_hinge" type="revolute">
        <parent>base</parent>
        <child>valve</child>
        <axis>
          <xyz>0 1 0</xyz>
          <limit>
            <lower>-12.5663706144</lower>
            <upper>0</upper>
          </limit>
          <dynamics>
            <damping>1.0</damping>
          </dynamics>
        </axis>
        <physics>
          <ode>
            <cfm_damping>1</cfm_damping>
          </ode>
        </physics>
      </joint>
    </model>

    <!-- Joint connecting the frame and the door -->
    <joint name="door_hinge" type="revolute">
      <parent>src_habitat_frame::module_small</parent>
      <child>src_habitat_door::door_02</child>
      <pose>-0.8 0 0.2 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>0</lower>
          <upper>1.7</upper>
        </limit>
        <dynamics>
          <damping>0</damping>
          <friction>0</friction>
        </dynamics>
      </axis>
      <physics>
        <ode>
          <cfm_damping>1</cfm_damping>
        </ode>
      </physics>
    </joint>

  </model>
</sdf>
